/*!

Name: Instagram Lite
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: January 14, 2014
Licensed under the MIT license

*/
!function(t){t.fn.instagramLite=function(e){if(!this.length)return this;plugin=this,plugin.defaults={username:null,clientID:null,limit:null,list:!0,videos:!1,urls:!1,captions:!1,date:!1,likes:!1,comments_count:!1,max_id:null,load_more:null,error:function(){},success:function(){}};var a=t.extend({},plugin.defaults,e),i=t(this),s=function(t){return t[t.length-1].id},o=function(t){for(var e=t.split(" "),a="",i=0;i<e.length;i++){var s;if("@"==e[i][0]){var o='<a href="http://twitter.com/'+e[i].replace("@","").toLowerCase()+'" target="_blank">'+e[i]+"</a>";s=o}else if("#"==e[i][0]){var o='<a href="http://twitter.com/hashtag/'+e[i].replace("#","").toLowerCase()+'" target="_blank">'+e[i]+"</a>";s=o}else s=e[i];a+=s+" "}return a},l=function(){a.clientID&&a.username?i.each(function(){var e=t(this);t.ajax({type:"GET",url:"https://api.instagram.com/v1/users/search?q="+a.username+"&client_id="+a.clientID+"&callback=?",dataType:"jsonp",success:function(i){if(i.data.length){var l=i.data[0],n="https://api.instagram.com/v1/users/"+l.id+"/media/recent/?client_id="+a.clientID+"&count="+a.limit+"&callback=?";n+=a.max_id?"&max_id="+a.max_id:"",t.ajax({type:"GET",url:n,dataType:"jsonp",success:function(t){if(200===t.meta.code&&t.data.length){for(var i=0;i<t.data.length;i++){var l,n=t.data[i];if("image"===n.type||!a.videos){if(l='<img class="il-photo__img" src="'+n.images.standard_resolution.url+'" alt="Instagram Image" data-filter="'+n.filter+'" />',a.urls&&(l='<a href="'+n.link+'" target="_blank">'+l+"</a>"),(a.captions||a.date||a.likes||a.comments_count)&&(l+='<div class="il-photo__meta">'),a.captions&&n.caption&&(l+='<div class="il-photo__caption" data-caption-id="'+n.caption.id+'">'+o(n.caption.text)+"</div>"),a.date){{var r=new Date(1e3*n.created_time),c=r.getDate(),d=r.getMonth()+1,u=r.getFullYear();r.getHours(),r.getMinutes(),r.getSeconds()}r=d+"/"+c+"/"+u,l+='<div class="il-photo__date">'+r+"</div>"}a.likes&&(l+='<div class="il-photo__likes">'+n.likes.count+"</div>"),a.comments_count&&n.comments&&(l+='<div class="il-photo__comments">'+n.comments.count+"</div>"),(a.captions||a.date||a.likes||a.comments_count)&&(l+="</div>")}if("video"===n.type&&a.videos&&n.videos){var m;n.videos.standard_resolution?m=n.videos.standard_resolution.url:n.videos.low_resolution?m=n.videos.low_resolution.url:n.videos.low_bandwidth&&(m=n.videos.low_bandwidth.url),l='<video poster="'+n.images.standard_resolution.url+'" controls>',l+='<source src="'+m+'" type="video/mp4;"></source>',l+="</video>"}a.list&&l&&(l='<li class="il-item" data-instagram-id="'+n.id+'">'+l+"</li>"),""!==l&&e.append(l)}a.max_id=s(t.data),a.success.call(this)}else a.error.call(this,t.meta.code,t.meta.error_message)},error:function(){a.error.call(this)}})}else a.error.call(this)},error:function(){a.error.call(this)}})}):a.error.call(this)};a.load_more&&t(a.load_more).on("click",function(t){t.preventDefault(),l()}),l()}}(jQuery);