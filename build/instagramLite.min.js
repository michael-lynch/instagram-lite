/*!

Name: Instagram Lite
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: January 14, 2014
Licensed under the MIT license

*/
!function(t){t.fn.instagramLite=function(e){if(!this.length)return this;plugin=this,plugin.defaults={accessToken:null,limit:null,list:!0,videos:!1,urls:!1,captions:!1,date:!1,likes:!1,comments_count:!1,error:function(){},success:function(){}};var i=t.extend({},plugin.defaults,e),s=t(this),a=function(t){for(var e=t.split(" "),i="",s=0;s<e.length;s++){var a;if("@"==e[s][0]){var o='<a href="http://twitter.com/'+e[s].replace("@","").toLowerCase()+'" target="_blank">'+e[s]+"</a>";a=o}else if("#"==e[s][0]){var o='<a href="http://twitter.com/hashtag/'+e[s].replace("#","").toLowerCase()+'" target="_blank">'+e[s]+"</a>";a=o}else a=e[s];i+=a+" "}return i},o=function(t){for(var e=0;e<t.length;e++){var o,n=t[e];if("image"===n.type||!i.videos){if(o='<img class="il-photo__img" src="'+n.images.standard_resolution.url+'" alt="Instagram Image" data-filter="'+n.filter+'" />',i.urls&&(o='<a href="'+n.link+'" target="_blank">'+o+"</a>"),(i.captions||i.date||i.likes||i.comments_count)&&(o+='<div class="il-photo__meta">'),i.captions&&n.caption&&(o+='<div class="il-photo__caption" data-caption-id="'+n.caption.id+'">'+a(n.caption.text)+"</div>"),i.date){var l=new Date(1e3*n.created_time),r=l.getDate(),c=l.getMonth()+1,d=l.getFullYear();l.getHours(),l.getMinutes(),l.getSeconds();l=c+"/"+r+"/"+d,o+='<div class="il-photo__date">'+l+"</div>"}i.likes&&(o+='<div class="il-photo__likes">'+n.likes.count+"</div>"),i.comments_count&&n.comments&&(o+='<div class="il-photo__comments">'+n.comments.count+"</div>"),(i.captions||i.date||i.likes||i.comments_count)&&(o+="</div>")}if("video"===n.type&&i.videos&&n.videos){var u;n.videos.standard_resolution?u=n.videos.standard_resolution.url:n.videos.low_resolution?u=n.videos.low_resolution.url:n.videos.low_bandwidth&&(u=n.videos.low_bandwidth.url),o='<video poster="'+n.images.standard_resolution.url+'" controls>',o+='<source src="'+u+'" type="video/mp4;"></source>',o+="</video>"}i.list&&o&&(o='<li class="il-item" data-instagram-id="'+n.id+'">'+o+"</li>"),""!==o&&s.append(o)}},n=function(){if(i.accessToken){var e="https://api.instagram.com/v1/users/self/media/recent/?access_token="+i.accessToken+"&count="+i.limit;t.ajax({type:"GET",url:e,dataType:"jsonp",success:function(t){200===t.meta.code&&t.data.length?(o(t.data),i.success.call(this)):i.error.call(this)},error:function(){i.error.call(this)}})}};n()}}(jQuery);
